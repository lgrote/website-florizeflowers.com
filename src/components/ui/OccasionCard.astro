---
import type { CollectionEntry } from 'astro:content';
import Card from './Card.astro';
import Badge from './Badge.astro';
import Button from './Button.astro';

export interface Props {
  occasion: CollectionEntry<'occasions'>;
}

const { occasion } = Astro.props;
---

<Card className="flex flex-col h-full">
  <div class="flex items-start justify-between mb-4">
    <h3 class="text-xl font-bold text-florize-green">
      {occasion.data.occasion_name}
    </h3>
    {occasion.data.seasonal && (
      <Badge text="Seasonal" variant="seasonal" size="sm" />
    )}
  </div>

  <p class="text-gray-700 mb-4 flex-grow">
    {occasion.data.description}
  </p>

  {occasion.data.recommended_flowers && occasion.data.recommended_flowers.length > 0 && (
    <div class="mb-4 text-sm">
      <div class="font-semibold text-gray-700 mb-2">Recommended Flowers:</div>
      <ul class="space-y-1 text-gray-600">
        {occasion.data.recommended_flowers.slice(0, 2).map((item) => (
          <li class="flex items-start">
            <span class="text-florize-green mr-1">â€¢</span>
            {item.flower}
          </li>
        ))}
      </ul>
    </div>
  )}

  <Button
    href={`/occasions/${occasion.data.occasion_id}`}
    variant="secondary"
    size="md"
    text="View Guide"
    className="w-full text-center"
  />
</Card>
