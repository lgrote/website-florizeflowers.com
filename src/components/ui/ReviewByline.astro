---
export interface Props {
  author?: string;
  datePublished?: string;
  dateModified?: string;
  expertTested?: boolean;
}

const {
  author = "Florize Expert Team",
  datePublished,
  dateModified,
  expertTested = true
} = Astro.props;

// Format dates
const formatDate = (dateString?: string) => {
  if (!dateString) return null;
  const date = new Date(dateString);
  return date.toLocaleDateString('en-GB', { year: 'numeric', month: 'long', day: 'numeric' });
};

const publishedDate = formatDate(datePublished);
const modifiedDate = formatDate(dateModified);
const displayDate = modifiedDate || publishedDate;
---

<div class="review-byline">
  <div class="byline-content">
    <div class="byline-author">
      <div class="author-badge">
        <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
          <path d="M10 10C12.21 10 14 8.21 14 6C14 3.79 12.21 2 10 2C7.79 2 6 3.79 6 6C6 8.21 7.79 10 10 10ZM10 12C7.33 12 2 13.34 2 16V18H18V16C18 13.34 12.67 12 10 12Z" fill="currentColor"/>
        </svg>
      </div>
      <div class="author-info">
        <span class="author-label">Reviewed by</span>
        <span class="author-name">{author}</span>
      </div>
    </div>

    {expertTested && (
      <div class="expert-badge">
        <svg width="18" height="18" viewBox="0 0 20 20" fill="none">
          <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z" fill="currentColor"/>
        </svg>
        <span>Expert Tested</span>
      </div>
    )}

    {displayDate && (
      <div class="review-date">
        <svg width="18" height="18" viewBox="0 0 20 20" fill="none">
          <path d="M6 2C5.44772 2 5 2.44772 5 3V4H4C2.89543 4 2 4.89543 2 6V16C2 17.1046 2.89543 18 4 18H16C17.1046 18 18 17.1046 18 16V6C18 4.89543 17.1046 4 16 4H15V3C15 2.44772 14.5523 2 14 2C13.4477 2 13 2.44772 13 3V4H7V3C7 2.44772 6.55228 2 6 2ZM6 7C5.44772 7 5 7.44772 5 8C5 8.55228 5.44772 9 6 9H14C14.5523 9 15 8.55228 15 8C15 7.44772 14.5523 7 14 7H6Z" fill="currentColor"/>
        </svg>
        <span>
          {modifiedDate ? 'Updated' : 'Published'} {displayDate}
        </span>
      </div>
    )}
  </div>
</div>

<style>
  .review-byline {
    background: white;
    border-radius: 12px;
    padding: 1.25rem 1.5rem;
    margin: -1rem 0 2rem 0;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06);
    border: 1px solid #e5e7eb;
  }

  .byline-content {
    display: flex;
    align-items: center;
    justify-content: flex-start;
    gap: 2rem;
    flex-wrap: wrap;
  }

  .byline-author {
    display: flex;
    align-items: center;
    gap: 0.75rem;
  }

  .author-badge {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 40px;
    height: 40px;
    background: linear-gradient(135deg, #f0f8f4 0%, #e8f5e9 100%);
    border-radius: 50%;
    color: var(--florize-green, #4a7c59);
  }

  .author-info {
    display: flex;
    flex-direction: column;
    gap: 0.125rem;
  }

  .author-label {
    font-size: 0.75rem;
    color: #6b7280;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    font-weight: 500;
  }

  .author-name {
    font-size: 0.9375rem;
    font-weight: 600;
    color: #1f2937;
  }

  .expert-badge {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.5rem 1rem;
    background: linear-gradient(135deg, #fffbeb 0%, #fef3c7 100%);
    border-radius: 20px;
    color: #92400e;
    font-size: 0.875rem;
    font-weight: 600;
  }

  .expert-badge svg {
    color: #d97706;
  }

  .review-date {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    color: #6b7280;
    font-size: 0.875rem;
  }

  .review-date svg {
    flex-shrink: 0;
  }

  @media (max-width: 640px) {
    .review-byline {
      padding: 1rem;
      margin: -0.5rem 0 1.5rem 0;
    }

    .byline-content {
      gap: 1rem;
    }

    .expert-badge {
      font-size: 0.8125rem;
      padding: 0.375rem 0.75rem;
    }

    .review-date {
      font-size: 0.8125rem;
    }
  }
</style>
